(this["webpackJsonpdiagnal-workshop"]=this["webpackJsonpdiagnal-workshop"]||[]).push([[0],{55:function(e,t,o){},56:function(e,t,o){},57:function(e,t,o){},58:function(e,t,o){},59:function(e,t,o){},60:function(e,t,o){},61:function(e,t,o){"use strict";o.r(t);var A=o(1),a=o(0),n=o.n(a),s=o(10),c=o.n(s),h=o(4),i=o(5),r=o(7),g=o(6),C=o(2),d=o(11),E="LOADING",u="UPDATE_DATA",I=o(25),l=o.n(I),p="https://raw.githubusercontent.com/kirandcunha/diagnal-workshop/dev/mock-data/",Q="<<page>>",B="CONTENTLISTINGPAGE-PAGE<<page>>.json",j=27,b=function(e){return{type:E,payload:e}},v=function(e){return{type:u,payload:e.page}},f=(o(55),function(e){Object(r.a)(o,e);var t=Object(g.a)(o);function o(e){var A;return Object(h.a)(this,o),(A=t.call(this,e)).showSearch=A.showSearch.bind(Object(C.a)(A)),A.hideSearch=A.hideSearch.bind(Object(C.a)(A)),A.keyDown=A.keyDown.bind(Object(C.a)(A)),A.mouseDown=A.mouseDown.bind(Object(C.a)(A)),A.handleChange=A.handleChange.bind(Object(C.a)(A)),A.onBackClick=A.onBackClick.bind(Object(C.a)(A)),A.inputRef=n.a.createRef(),A.state={showSearch:!1,searchValue:""},A}return Object(i.a)(o,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.keyDown),window.addEventListener("mousedown",this.mouseDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keyDown),window.removeEventListener("mousedown",this.mouseDown)}},{key:"onBackClick",value:function(){this.props.onBackClick&&this.props.onBackClick()}},{key:"keyDown",value:function(e){switch(e.keyCode){case j:this.hideSearch()}}},{key:"mouseDown",value:function(e){this.state.showSearch&&e.target!==this.inputRef.current&&this.hideSearch()}},{key:"handleChange",value:function(e){this.setState({searchValue:e.target.value}),this.props.onSearch&&this.props.onSearch(e.target.value)}},{key:"showSearch",value:function(){var e=this;this.setState({showSearch:!0},(function(){e.inputRef.current.focus()}))}},{key:"hideSearch",value:function(){this.setState({showSearch:!1})}},{key:"render",value:function(){return Object(A.jsx)("div",{className:"header",children:this.state.showSearch?Object(A.jsx)("input",{ref:this.inputRef,type:"text",name:"search",placeholder:"Search..",className:"search-input",autoComplete:"off",value:this.state.searchValue,onChange:this.handleChange}):Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{className:"back-button",onClick:this.onBackClick}),Object(A.jsx)("div",{className:"title",children:this.props.title?this.props.title:"Romantic Comedy"}),Object(A.jsx)("div",{className:"search-icon",onClick:this.showSearch})]})})}}]),o}(n.a.Component)),K=(o(56),function(e){Object(r.a)(o,e);var t=Object(g.a)(o);function o(e){var A;return Object(h.a)(this,o),(A=t.call(this,e)).onError=A.onError.bind(Object(C.a)(A)),A}return Object(i.a)(o,[{key:"onError",value:function(e){e.target.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUEAAAHhCAYAAAGHFTxJAAAACXBIWXMAAAsSAAALEgHS3X78AAAOXUlEQVR42u3dP0jc9x8G8Le/pERiv9RCKpIbmgwhl7sOLgcOHTRCKLRg2nBmdeggPVI6hf4Z6lJJOxWKToVIt15okg4podKg28EtdjhiQTCFnoQSqGCRtErzm5RczjP+iznj67W0nqf58Pjk8Xt6mpZMJvMomlvv/2IfcEiHdEiHdEiHdEiHdEiHdEiHdEiHdEiHPICH7OnpiYiISqXSvIecnJzcXx/u3Urz8LM6YDabbb4kh4eHn0mKEREtu/1F1GKxGAMDA7v5LntbfKXXmDukQzqkQzqkQzqkQzqkQzqkQzqkQza9wxHR2+RnnG76L7P8Txcd0AEd0AEd0AEd0AEd0AEd0AEd0AEd0AG3pKmf3LYqSZLmOWChUKh5OZvNRqlUap4Djo6O1t1WLpeb60P8+BPaKpVKDA4O7sr73dUvYBaLxZiamlo30aY4oB10QAd0QAd0QAd0QAd0QAd0QAd0QAc8YAds+ieY7Yef4Wt2++NnDP1dFiJCFKIQhYgQhShEISJEIQpRiCIQohCFiBCFKEQhIkQhClGICPHAhZjP5yOfz9fd3tfXF5VKJSqVSoyPjzfVmT2haeea5wlNSZLU/XDnelbbuJs/OnugmjgyMhJJksSlS5c0cSODg4Nr/wrJ5cuXo1gsRkdHR0RE9Pf3x9mzZ5vug2sTX8QmusQRIkIUohCFKAIhClGICFGIQhQiQhSiEIWIEIUoRCEiRCEKUYhsmaeRaKEABShABChAAQoQAQpQgAJEgAIUoAARoAAFKEAEKEABChABClCAAkSAAhSgABGgAAUoQAQoQAEKEAEKUIACFCACFKAABYgABShAASJAAQpw1/T09MQbb7wRERHpdDoqlUqMjIw01Rmb7hfv5PP5uHbtWt3tj//za9lsVgMbmZiY2Fd/hf3qpxelgYVCIS5evPjU+zXbv6bYVH+Fjx07tun7Jknir/B25HK5SKVScfPmTQGup7OzM+7fv9/wr28zfQZuur/Cg4ODMTQ0FF1dXQ0vY5pp/5ouwNV/+Hl6ejoiIorFYhSLxYiI+Oyzz2r+6zJmE1bDGxgYcB3oOhABClCAAkSAAhSgABGgAAUoQAQoQAEKUIAIUIACFCACFKAABYgABShAASJAAQpQgAhQgAIUIAIUoAAFiAAFKEABIkABClCACFCAzeNwRPSKYfv81g6et14ziM/FoIQoISghSghKiBKCEqKEoIQoISghSghKiBKCEqKEoIQoISghSghKiBKCEqKEoIQoISghSghKiBKCEqKEoIQoISghSghKiBKCEqKEoIQoISghSghKiBKCEqKEoIQoISghSgiHRbB9PT09ERHxxx9/xOzsrEC2qSWTyTwSQ2NdXV1x6tSpmJiYiIWFhbrXt7e3191eqVTq7jc4OBjlclmg9Xp9On6KU6dO1azek54sYC6XW/d+hUJBmJZwb5VKpUiSJCIiLly4EDMzM0JpsISuCZ+R7u7uiIhIkiRKpdLa7QppCZ8qlUrF+fPn114eHR3d0ftzfeiacMuq1WrcvHkz5ubm4ttvv93x+/vtt99qXl5cXFRAS4hrwn2kvb09Pvroo7WXh4eHN/V2ExMTcfz48Zr1W71GpJ5Pxxt48ssy7e3tNS9ns9nI5/PR1tZWc/vjBVx9cIJPx7uuWCzWvHz37t34/PPPa27L5XKu/zbx6VgJt6mtrS2uXr269vLAwIBQlJD9WkLXhHhgAkqIEoISooSghCghKCFKCEqIEoISooSghCghKCFKCEqIEoISooSghCghKCFKCEqIEoISooSghCghKCFKCEqIEoISooSghCghKCFKCEqIEoISooSghCghKCFKCEqIEkJLJpN5JAasIAoICogCggKigKCAKCAoIAoICogCggKigKCAKCAoIAoICogCggKigKCAKCAoIAoICogCggKigKCAKCAKCAqIAoICooCggCggKCAKCAqIAoICooCggCggKCAKCAqIAoICooCggCggKCAKCAqIAoICooCggCggCggKiAKCAqKAoIAoICggCggKiAKCAqKAoIAoICggCggKiAKCAqKAoIAoICggCggKiAKCAqKAoIAoICggCogCggKigKCAKCAoIAoICogCggKigKCAKCAoIC+CwyLYntbW1uju7o6IiMnJSYEo4N56+eWXG76uVCpFkiRrL2ezWYE10JLJZB6JobF8Ph9LS0tx69atute1t7fH33//HSsrK2u3jY+PRy6Xq7uvEroG3LK33347IiKOHj0aHR0dda9fWFioKV9ErFs+FHBbqtXq2v//9ddfAnENuLemp6ejUqnE8vLypt9mbGws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"}},{key:"render",value:function(){return Object(A.jsxs)("div",{className:"card",children:[Object(A.jsx)("img",{onError:this.onError,src:p+this.props.poster["poster-image"],className:"poster",alt:"poster"}),Object(A.jsx)("div",{className:"name",children:this.props.poster.name})]})}}]),o}(n.a.Component)),S=(o(57),function(e){Object(r.a)(o,e);var t=Object(g.a)(o);function o(e){var A;return Object(h.a)(this,o),(A=t.call(this,e)).gridRef=n.a.createRef(),A.scrolled=A.scrolled.bind(Object(C.a)(A)),A}return Object(i.a)(o,[{key:"componentDidMount",value:function(){this.gridRef.current.addEventListener("scroll",this.scrolled)}},{key:"componentWillUnmount",value:function(){this.gridRef.current.removeEventListener("scroll",this.scrolled)}},{key:"scrolled",value:function(e){var t=e.srcElement;t.scrollTop>t.scrollHeight-3*t.clientHeight&&this.props.thresholdReached&&this.props.thresholdReached()}},{key:"render",value:function(){return Object(A.jsxs)("div",{className:"grid",ref:this.gridRef,children:[this.props.posters&&this.props.posters.map((function(e,t){return Object(A.jsx)(K,{poster:e},t)})),(!this.props.posters||0===this.props.posters.length)&&Object(A.jsx)("div",{className:"no-data",children:"No Data"})]})}}]),o}(n.a.Component)),w=(o(58),function(e){Object(r.a)(o,e);var t=Object(g.a)(o);function o(e){var A;return Object(h.a)(this,o),(A=t.call(this,e)).MODULE_NAME="Home",A.state={page:1,searchText:""},A.onSearch=A.onSearch.bind(Object(C.a)(A)),A.thresholdReached=A.thresholdReached.bind(Object(C.a)(A)),A}return Object(i.a)(o,[{key:"componentDidMount",value:function(){null===this.props.data&&this.props.fetchData(this.state.page)}},{key:"onSearch",value:function(e){this.setState({searchText:e})}},{key:"onBackClick",value:function(){this.setState({searchText:""})}},{key:"thresholdReached",value:function(){console.log("thresholdReached ",this.props.dataLoading,this.props.itemsReceived,this.props.totalItems),this.props.itemsReceived<this.props.totalItems&&!this.props.dataLoading&&(console.log("Need to fire"),this.props.fetchData(this.state.page+1),this.setState({page:this.state.page+1}))}},{key:"render",value:function(){var e=this,t=this.props.data?this.props.data.filter((function(t){return t.name.toLowerCase().includes(e.state.searchText.toLowerCase().trim())})):[];return Object(A.jsxs)("div",{className:"home",children:[Object(A.jsx)(f,{onSearch:this.onSearch}),Object(A.jsx)(S,{posters:t,thresholdReached:this.thresholdReached})]})}}]),o}(n.a.Component)),m=Object(d.b)((function(e){return{data:e.pageData,searchText:e.searchText,itemsReceived:e.itemsReceived,totalItems:e.totalItems,dataLoading:e.dataLoading}}),(function(e){return{fetchData:function(t){e(function(e){return function(t){t(b(!0));var o=p+B.replace(Q,e);l.a.get(o).then((function(e){t(b(!1)),t(v(e.data))})).catch((function(e){t(b(!1)),console.log(e)}))}}(t))}}}))(w),R=(o(59),function(e){Object(r.a)(o,e);var t=Object(g.a)(o);function o(){return Object(h.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){return Object(A.jsx)("div",{className:"App",children:Object(A.jsx)(m,{})})}}]),o}(n.a.Component)),O=o(8),k=o(26),F=o(9),Y={dataLoading:!1,pageData:null,itemsReceived:0,totalItems:0,pagesReceived:0,totalPages:0},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(F.a)(Object(F.a)({},e),{},{dataLoading:t.payload});case u:var o;return o=null===e.pageData?t.payload["content-items"].content:e.pageData.concat(t.payload["content-items"].content),Object(F.a)(Object(F.a)({},e),{},{itemsReceived:o.length,pagesReceived:e.pagesReceived+1,totalItems:t.payload["total-content-items"],pageData:o});default:return e}},M=(o(60),Object(O.a)(k.a)),G=Object(O.c)(U,M);c.a.render(Object(A.jsx)(n.a.StrictMode,{children:Object(A.jsx)(d.a,{store:G,children:Object(A.jsx)(R,{})})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.1b187be9.chunk.js.map