{"version":3,"sources":["store/action/actions.js","utils/constants.js","store/action/actionCreators.js","components/header/index.js","components/card/index.js","assets/placeholder_for_missing_posters.png","components/grid/index.js","pages/home/index.js","App.js","store/reducer.js","index.js"],"names":["LOADING","UPDATE_DATA","SERVER_URL","PAGE_PLACE_HOLDER","PAGE_ENDPOINT","KEYCODES","updateLoading","data","type","actionTypes","payload","updateData","page","Header","props","showSearch","bind","hideSearch","keyDown","mouseDown","handleChange","onBackClick","inputRef","React","createRef","state","searchValue","window","addEventListener","this","removeEventListener","event","keyCode","target","current","setState","value","onSearch","focus","className","ref","name","placeholder","autoComplete","onChange","onClick","title","Component","Card","onError","src","poster","alt","text","maxLine","ellipsis","trimRight","basedOn","Grid","gridRef","scrolled","node","srcElement","scrollTop","scrollHeight","clientHeight","thresholdReached","posters","map","item","i","Home","MODULE_NAME","searchText","fetchData","console","log","dataLoading","itemsReceived","totalItems","filteredData","filter","toLowerCase","includes","trim","connect","pageData","dispatch","url","replace","axios","get","then","response","catch","error","App","initialState","pagesReceived","totalPages","reducer","action","content","concat","length","thunkMiddleware","applyMiddleware","thunk","store","createStore","rootReducer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"uVAAaA,EAAU,UACVC,EAAc,c,iBCDdC,EAAa,gFACbC,EAAoB,WACpBC,EAAgB,uCAEhBC,EACH,GCeJC,EAAgB,SAACC,GACrB,MAAO,CACLC,KAAMC,EACNC,QAASH,IAqBPI,EAAa,SAAAJ,GACjB,MAAO,CACLC,KAAMC,EACNC,QAASH,EAAKK,OCiDHC,G,wDA3Fb,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,WAAa,EAAKA,WAAWC,KAAhB,gBAClB,EAAKC,WAAa,EAAKA,WAAWD,KAAhB,gBAClB,EAAKE,QAAU,EAAKA,QAAQF,KAAb,gBACf,EAAKG,UAAY,EAAKA,UAAUH,KAAf,gBACjB,EAAKI,aAAe,EAAKA,aAAaJ,KAAlB,gBACpB,EAAKK,YAAc,EAAKA,YAAYL,KAAjB,gBAEnB,EAAKM,SAAWC,IAAMC,YAEtB,EAAKC,MAAQ,CACXV,YAAY,EACZW,YAAa,IAbE,E,gEAkBjBC,OAAOC,iBAAiB,UAAWC,KAAKX,SACxCS,OAAOC,iBAAiB,YAAaC,KAAKV,a,6CAI1CQ,OAAOG,oBAAoB,UAAWD,KAAKX,SAC3CS,OAAOG,oBAAoB,YAAaD,KAAKV,a,oCAG7CU,KAAKf,MAAMO,aAAeQ,KAAKf,MAAMO,gB,8BAG/BU,GACN,OAAQA,EAAMC,SAEZ,KAAK3B,EACHwB,KAAKZ,gB,gCAKDc,GACJF,KAAKJ,MAAMV,YAAcgB,EAAME,SAAWJ,KAAKP,SAASY,SAC1DL,KAAKZ,e,mCAIIc,GACXF,KAAKM,SAAS,CAACT,YAAaK,EAAME,OAAOG,QACzCP,KAAKf,MAAMuB,UAAYR,KAAKf,MAAMuB,SAASN,EAAME,OAAOG,S,mCAG5C,IAAD,OACXP,KAAKM,SAAS,CACZpB,YAAY,IACX,WACD,EAAKO,SAASY,QAAQI,a,mCAKxBT,KAAKM,SAAS,CACZpB,YAAY,M,+BAKd,OACE,qBAAKwB,UAAU,SAAf,SACIV,KAAKJ,MAAMV,WASX,uBACEyB,IAAKX,KAAKP,SACVd,KAAK,OACLiC,KAAK,SACLC,YAAY,WACZH,UAAU,eACVI,aAAa,MACbP,MAAOP,KAAKJ,MAAMC,YAClBkB,SAAUf,KAAKT,eAhBjB,gCACE,qBAAKmB,UAAU,cAAcM,QAAShB,KAAKR,cAC3C,qBAAKkB,UAAU,QAAf,SACGV,KAAKf,MAAMgC,MAAQjB,KAAKf,MAAMgC,MAAQ,oBAEzC,qBAAKP,UAAU,cAAcM,QAAShB,KAAKd,sB,GA1ElCQ,IAAMwB,Y,iBC+BZC,G,wDA5Bb,WAAYlC,GAAQ,IAAD,8BACjB,cAAMA,IACDmC,QAAU,EAAKA,QAAQjC,KAAb,gBAFE,E,oDAIXe,GACNA,EAAME,OAAOiB,ICZF,26J,+BDeX,OACE,sBAAKX,UAAU,OAAf,UACE,qBACEU,QAASpB,KAAKoB,QACdC,IAAKhD,EAAa2B,KAAKf,MAAMqC,OAAO,gBACpCZ,UAAU,SACVa,IAAI,WAEN,cAAC,IAAD,CACAb,UAAU,OACRc,KAAMxB,KAAKf,MAAMqC,OAAX,KACNG,QAAQ,IACRC,SAAS,MACTC,WAAS,EACTC,QAAQ,mB,GAvBClC,IAAMwB,YEkCVW,G,wDAlCb,WAAY5C,GAAQ,IAAD,8BACjB,cAAMA,IACD6C,QAAUpC,IAAMC,YACrB,EAAKoC,SAAW,EAAKA,SAAS5C,KAAd,gBAHC,E,gEAMjBa,KAAK8B,QAAQzB,QAAQN,iBAAiB,SAAUC,KAAK+B,Y,6CAIrD/B,KAAK8B,QAAQzB,QAAQJ,oBAAoB,SAAUD,KAAK+B,Y,+BAGjD7B,GACP,IAAM8B,EAAO9B,EAAM+B,WAEjBD,EAAKE,UACLF,EAAKG,aLpBwB,EKoBTH,EAAKI,cAEzBpC,KAAKf,MAAMoD,kBAAoBrC,KAAKf,MAAMoD,qB,+BAK5C,OACE,qBAAK3B,UAAU,OAAOC,IAAKX,KAAK8B,QAAhC,SACG9B,KAAKf,MAAMqD,SACVtC,KAAKf,MAAMqD,QAAQC,KAAI,SAACC,EAAMC,GAC5B,OAAO,cAAC,EAAD,CAAcnB,OAAQkB,GAAXC,Y,GA7BX/C,IAAMwB,YCEnBwB,G,wDAEJ,WAAYzD,GAAQ,IAAD,8BACjB,cAAMA,IAFR0D,YAAc,OAGZ,EAAK/C,MAAQ,CACXb,KAAM,EACN6D,WAAY,IAEd,EAAKpC,SAAW,EAAKA,SAASrB,KAAd,gBAChB,EAAKkD,iBAAmB,EAAKA,iBAAiBlD,KAAtB,gBAPP,E,gEAWO,OAApBa,KAAKf,MAAMP,MACbsB,KAAKf,MAAM4D,UAAU7C,KAAKJ,MAAMb,Q,+BAI3ByC,GACPsB,QAAQC,IAAI,YAAavB,GACzBxB,KAAKM,SAAS,CACZsC,WAAYpB,M,oCAKdsB,QAAQC,IAAI,eACZ/C,KAAKM,SAAS,CACZsC,WAAY,O,yCAKdE,QAAQC,IACN,oBACA/C,KAAKf,MAAM+D,YACXhD,KAAKf,MAAMgE,cACXjD,KAAKf,MAAMiE,YAGXlD,KAAKf,MAAMgE,cAAgBjD,KAAKf,MAAMiE,aACrClD,KAAKf,MAAM+D,cAEZF,QAAQC,IAAI,gBACZ/C,KAAKf,MAAM4D,UAAU7C,KAAKJ,MAAMb,KAAO,GACvCiB,KAAKM,SAAS,CACZvB,KAAMiB,KAAKJ,MAAMb,KAAO,O,+BAKpB,IAAD,OACDoE,EAAenD,KAAKf,MAAMP,KAC5BsB,KAAKf,MAAMP,KAAK0E,QAAO,SAAAZ,GAAI,OACzBA,EAAK5B,KAAKyC,cAAcC,SAAS,EAAK1D,MAAMgD,WAAWS,cAAcE,WAEvE,GACJ,OACE,sBAAK7C,UAAU,OAAf,UACE,cAAC,EAAD,CAAQF,SAAUR,KAAKQ,WACvB,cAAC,EAAD,CAAM8B,QAASa,EAAcd,iBAAkBrC,KAAKqC,0B,GA5DzC3C,IAAMwB,YAoFVsC,eAlBS,SAAA5D,GACtB,MAAO,CACLlB,KAAMkB,EAAM6D,SACZb,WAAYhD,EAAMgD,WAClBK,cAAerD,EAAMqD,cACrBC,WAAYtD,EAAMsD,WAClBF,YAAapD,EAAMoD,gBAII,SAAAU,GACzB,MAAO,CACLb,UAAW,SAAA9D,GACT2E,EL3DmB,SAAA3E,GACvB,OAAO,SAAA2E,GACLA,EAASjF,GAAc,IACvB,IAAMkF,EAAMtF,EAAaE,EAAcqF,QAAQtF,EAAmBS,GAClE8E,IACGC,IAAIH,GACJI,MAAK,SAAAC,GACJN,EAASjF,GAAc,IACvBiF,EAAS5E,EAAWkF,EAAStF,UAE9BuF,OAAM,SAAAC,GACLR,EAASjF,GAAc,IACvBqE,QAAQC,IAAImB,OK+CLtF,CAAsBG,QAKtByE,CAGbd,GC/EayB,G,6KAPX,OACI,qBAAKzD,UAAU,MAAf,SACE,cAAC,EAAD,U,GAJQhB,IAAMwB,Y,sBCJlBkD,EAAe,CACnBpB,aAAa,EACbS,SAAU,KACVR,cAAe,EACfC,WAAY,EACZmB,cAAe,EACfC,WAAY,GA+BCC,EA5BC,WAAmC,IAAlC3E,EAAiC,uDAAzBwE,EAAcI,EAAW,uCAChD,OAAQA,EAAO7F,MACb,KAAKC,EACH,OAAO,2BACFgB,GADL,IAEEoD,YAAawB,EAAO3F,UAExB,KAAKD,EACH,IAAI6E,EAQJ,OANEA,EADqB,OAAnB7D,EAAM6D,SACGe,EAAO3F,QAAQ,iBAAiB4F,QAEhC7E,EAAM6D,SAASiB,OACxBF,EAAO3F,QAAQ,iBAAiB4F,SAG7B,2BACF7E,GADL,IAEEqD,cAAeQ,EAASkB,OACxBN,cAAezE,EAAMyE,cAAgB,EACrCnB,WAAYsB,EAAO3F,QAAQ,uBAC3B4E,SAAUA,IAEd,QACE,OAAO7D,IC1BPgF,G,MAAkBC,YAAgBC,MAClCC,EAAQC,YAAYC,EAAaL,GAEvCM,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUL,MAAOA,EAAjB,SACE,cAAC,EAAD,QAGJM,SAASC,eAAe,W","file":"static/js/main.8ef7b509.chunk.js","sourcesContent":["export const LOADING = \"LOADING\";\r\nexport const UPDATE_DATA = \"UPDATE_DATA\";\r\n","export const SERVER_URL = \"https://raw.githubusercontent.com/kirandcunha/diagnal-workshop/dev/mock-data/\"\r\nexport const PAGE_PLACE_HOLDER = \"<<page>>\"\r\nexport const PAGE_ENDPOINT = \"CONTENTLISTINGPAGE-PAGE\" + PAGE_PLACE_HOLDER + \".json\"\r\nexport const LAZY_LOAD_THRESHOLD = 3 // 2 pages height worth left to scroll\r\nexport const KEYCODES = {\r\n  ESCAPE: 27,\r\n  BACK: 8,\r\n}\r\n","import * as actionTypes from \"./actions\";\r\nimport axios from \"axios\";\r\nimport {\r\n  SERVER_URL,\r\n  PAGE_ENDPOINT,\r\n  PAGE_PLACE_HOLDER\r\n} from \"../../utils/constants\";\r\n\r\nexport const startLoading = () => {\r\n  return dispatch => {\r\n    dispatch(updateLoading(true));\r\n  };\r\n};\r\n\r\nexport const endLoading = () => {\r\n  return dispatch => {\r\n    dispatch(updateLoading(true));\r\n  };\r\n};\r\n\r\nconst updateLoading = (data) => {\r\n  return {\r\n    type: actionTypes.LOADING,\r\n    payload: data\r\n  };\r\n};\r\n\r\nexport const fetchData = page => {\r\n  return dispatch => {\r\n    dispatch(updateLoading(true))\r\n    const url = SERVER_URL + PAGE_ENDPOINT.replace(PAGE_PLACE_HOLDER, page);\r\n    axios\r\n      .get(url)\r\n      .then(response => {\r\n        dispatch(updateLoading(false))\r\n        dispatch(updateData(response.data));\r\n      })\r\n      .catch(error => {\r\n        dispatch(updateLoading(false))\r\n        console.log(error);\r\n      });\r\n  };\r\n};\r\n\r\nconst updateData = data => {\r\n  return {\r\n    type: actionTypes.UPDATE_DATA,\r\n    payload: data.page\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport {KEYCODES} from \"../../utils/constants\";\r\nimport \"./index.css\";\r\n\r\nclass Header extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.showSearch = this.showSearch.bind(this);\r\n    this.hideSearch = this.hideSearch.bind(this);\r\n    this.keyDown = this.keyDown.bind(this);\r\n    this.mouseDown = this.mouseDown.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.onBackClick = this.onBackClick.bind(this);\r\n\r\n    this.inputRef = React.createRef();\r\n\r\n    this.state = {\r\n      showSearch: false,\r\n      searchValue: \"\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.keyDown);\r\n    window.addEventListener(\"mousedown\", this.mouseDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.keyDown);\r\n    window.removeEventListener(\"mousedown\", this.mouseDown);\r\n  }\r\n  onBackClick() {\r\n    this.props.onBackClick && this.props.onBackClick()\r\n  }\r\n\r\n  keyDown(event) {\r\n    switch (event.keyCode) {\r\n      // case KEYCODES.BACK:\r\n      case KEYCODES.ESCAPE:\r\n        this.hideSearch();\r\n        break;\r\n      default:\r\n    }\r\n  }\r\n  mouseDown(event) {\r\n    if (this.state.showSearch && event.target !== this.inputRef.current) {\r\n      this.hideSearch();\r\n    }\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({searchValue: event.target.value});\r\n    this.props.onSearch && this.props.onSearch(event.target.value)\r\n  }\r\n\r\n  showSearch() {\r\n    this.setState({\r\n      showSearch: true\r\n    }, () => {\r\n      this.inputRef.current.focus()\r\n    });\r\n  }\r\n\r\n  hideSearch() {\r\n    this.setState({\r\n      showSearch: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"header\">\r\n        {!this.state.showSearch ? (\r\n          <div>\r\n            <div className=\"back-button\" onClick={this.onBackClick}/>\r\n            <div className=\"title\">\r\n              {this.props.title ? this.props.title : \"Romantic Comedy\"}\r\n            </div>\r\n            <div className=\"search-icon\" onClick={this.showSearch} />\r\n          </div>\r\n        ) : (\r\n          <input\r\n            ref={this.inputRef}\r\n            type=\"text\"\r\n            name=\"search\"\r\n            placeholder=\"Search..\"\r\n            className=\"search-input\"\r\n            autoComplete=\"off\"\r\n            value={this.state.searchValue}\r\n            onChange={this.handleChange}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Header;\r\n","import React from \"react\";\r\nimport LinesEllipsis from \"react-lines-ellipsis\";\r\nimport {SERVER_URL} from \"../../utils/constants\";\r\nimport defaultImage from \"../../assets/placeholder_for_missing_posters.png\";\r\nimport \"./index.css\";\r\n\r\nclass Card extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onError = this.onError.bind(this);\r\n  }\r\n  onError(event) {\r\n    event.target.src = defaultImage;\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"card\">\r\n        <img\r\n          onError={this.onError}\r\n          src={SERVER_URL + this.props.poster[\"poster-image\"]}\r\n          className=\"poster\"\r\n          alt=\"poster\"\r\n        />\r\n        <LinesEllipsis\r\n        className=\"name\"\r\n          text={this.props.poster[\"name\"]}\r\n          maxLine=\"2\"\r\n          ellipsis=\"...\"\r\n          trimRight\r\n          basedOn=\"letters\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Card;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUEAAAHhCAYAAAGHFTxJAAAACXBIWXMAAAsSAAALEgHS3X78AAAOXUlEQVR42u3dP0jc9x8G8Le/pERiv9RCKpIbmgwhl7sOLgcOHTRCKLRg2nBmdeggPVI6hf4Z6lJJOxWKToVIt15okg4podKg28EtdjhiQTCFnoQSqGCRtErzm5RczjP+iznj67W0nqf58Pjk8Xt6mpZMJvMomlvv/2IfcEiHdEiHdEiHdEiHdEiHdEiHdEiHdEiHPICH7OnpiYiISqXSvIecnJzcXx/u3Urz8LM6YDabbb4kh4eHn0mKEREtu/1F1GKxGAMDA7v5LntbfKXXmDukQzqkQzqkQzqkQzqkQzqkQzqkQza9wxHR2+RnnG76L7P8Txcd0AEd0AEd0AEd0AEd0AEd0AEd0AEd0AG3pKmf3LYqSZLmOWChUKh5OZvNRqlUap4Djo6O1t1WLpeb60P8+BPaKpVKDA4O7sr73dUvYBaLxZiamlo30aY4oB10QAd0QAd0QAd0QAd0QAd0QAd0QAc8YAds+ieY7Yef4Wt2++NnDP1dFiJCFKIQhYgQhShEISJEIQpRiCIQohCFiBCFKEQhIkQhClGICPHAhZjP5yOfz9fd3tfXF5VKJSqVSoyPjzfVmT2haeea5wlNSZLU/XDnelbbuJs/OnugmjgyMhJJksSlS5c0cSODg4Nr/wrJ5cuXo1gsRkdHR0RE9Pf3x9mzZ5vug2sTX8QmusQRIkIUohCFKAIhClGICFGIQhQiQhSiEIWIEIUoRCEiRCEKUYhsmaeRaKEABShABChAAQoQAQpQgAJEgAIUoAARoAAFKEAEKEABChABClCAAkSAAhSgABGgAAUoQAQoQAEKEAEKUIACFCACFKAABYgABShAASJAAQpw1/T09MQbb7wRERHpdDoqlUqMjIw01Rmb7hfv5PP5uHbtWt3tj//za9lsVgMbmZiY2Fd/hf3qpxelgYVCIS5evPjU+zXbv6bYVH+Fjx07tun7Jknir/B25HK5SKVScfPmTQGup7OzM+7fv9/wr28zfQZuur/Cg4ODMTQ0FF1dXQ0vY5pp/5ouwNV/+Hl6ejoiIorFYhSLxYiI+Oyzz2r+6zJmE1bDGxgYcB3oOhABClCAAkSAAhSgABGgAAUoQAQoQAEKUIAIUIACFCACFKAABYgABShAASJAAQpQgAhQgAIUIAIUoAAFiAAFKEABIkABClCACFCAzeNwRPSKYfv81g6et14ziM/FoIQoISghSghKiBKCEqKEoIQoISghSghKiBKCEqKEoIQoISghSghKiBKCEqKEoIQoISghSghKiBKCEqKEoIQoISghSghKiBKCEqKEoIQoISghSghKiBKCEqKEoIQoISghSgiHRbB9PT09ERHxxx9/xOzsrEC2qSWTyTwSQ2NdXV1x6tSpmJiYiIWFhbrXt7e3191eqVTq7jc4OBjlclmg9Xp9On6KU6dO1azek54sYC6XW/d+hUJBmJZwb5VKpUiSJCIiLly4EDMzM0JpsISuCZ+R7u7uiIhIkiRKpdLa7QppCZ8qlUrF+fPn114eHR3d0ftzfeiacMuq1WrcvHkz5ubm4ttvv93x+/vtt99qXl5cXFRAS4hrwn2kvb09Pvroo7WXh4eHN/V2ExMTcfz48Zr1W71GpJ5Pxxt48ssy7e3tNS9ns9nI5/PR1tZWc/vjBVx9cIJPx7uuWCzWvHz37t34/PPPa27L5XKu/zbx6VgJt6mtrS2uXr269vLAwIBQlJD9WkLXhHhgAkqIEoISooSghCghKCFKCEqIEoISooSghCghKCFKCEqIEoISooSghCghKCFKCEqIEoISooSghCghKCFKCEqIEoISooSghCghKCFKCEqIEoISooSghCghKCFKCEqIEkJLJpN5JAasIAoICogCggKigKCAKCAoIAoICogCggKigKCAKCAoIAoICogCggKigKCAKCAoIAoICogCggKigKCAKCAKCAqIAoICooCggCggKCAKCAqIAoICooCggCggKCAKCAqIAoICooCggCggKCAKCAqIAoICooCggCggCggKiAKCAqKAoIAoICggCggKiAKCAqKAoIAoICggCggKiAKCAqKAoIAoICggCggKiAKCAqKAoIAoICggCogCggKigKCAKCAoIAoICogCggKigKCAKCAoIC+CwyLYntbW1uju7o6IiMnJSYEo4N56+eWXG76uVCpFkiRrL2ezWYE10JLJZB6JobF8Ph9LS0tx69atute1t7fH33//HSsrK2u3jY+PRy6Xq7uvEroG3LK33347IiKOHj0aHR0dda9fWFioKV9ErFs+FHBbqtXq2v//9ddfAnENuLemp6ejUqnE8vLypt9mbGws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\"","import React from \"react\";\r\nimport Card from \"../card\";\r\nimport {LAZY_LOAD_THRESHOLD} from \"../../utils/constants\";\r\nimport \"./index.css\";\r\n\r\nclass Grid extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.gridRef = React.createRef();\r\n    this.scrolled = this.scrolled.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    this.gridRef.current.addEventListener(\"scroll\", this.scrolled);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.gridRef.current.removeEventListener(\"scroll\", this.scrolled);\r\n  }\r\n\r\n  scrolled(event) {\r\n    const node = event.srcElement;\r\n    if (\r\n      node.scrollTop >\r\n      node.scrollHeight - node.clientHeight * LAZY_LOAD_THRESHOLD\r\n    ) {\r\n      this.props.thresholdReached && this.props.thresholdReached();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"grid\" ref={this.gridRef}>\r\n        {this.props.posters &&\r\n          this.props.posters.map((item, i) => {\r\n            return <Card key={i} poster={item} />;\r\n          })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Grid;\r\n","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport * as actionTypes from \"../../store/action/\";\r\nimport Header from \"../../components/header\";\r\nimport Grid from \"../../components/grid\";\r\nimport \"./index.css\";\r\n\r\nclass Home extends React.Component {\r\n  MODULE_NAME = \"Home\";\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      page: 1,\r\n      searchText: \"\"\r\n    };\r\n    this.onSearch = this.onSearch.bind(this);\r\n    this.thresholdReached = this.thresholdReached.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.data === null) {\r\n      this.props.fetchData(this.state.page);\r\n    }\r\n  }\r\n\r\n  onSearch(text) {\r\n    console.log(\"onSearch \", text)\r\n    this.setState({\r\n      searchText: text\r\n    });\r\n  }\r\n\r\n  onBackClick() {\r\n    console.log(\"onBackClick\")\r\n    this.setState({\r\n      searchText: \"\"\r\n    });\r\n  }\r\n\r\n  thresholdReached() {\r\n    console.log(\r\n      \"thresholdReached \",\r\n      this.props.dataLoading,\r\n      this.props.itemsReceived,\r\n      this.props.totalItems\r\n    );\r\n    if (\r\n      this.props.itemsReceived < this.props.totalItems &&\r\n      !this.props.dataLoading\r\n    ) {\r\n      console.log(\"Need to fire\");\r\n      this.props.fetchData(this.state.page + 1);\r\n      this.setState({\r\n        page: this.state.page + 1\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const filteredData = this.props.data\r\n      ? this.props.data.filter(item =>\r\n          item.name.toLowerCase().includes(this.state.searchText.toLowerCase().trim())\r\n        )\r\n      : [];\r\n    return (\r\n      <div className=\"home\">\r\n        <Header onSearch={this.onSearch} />\r\n        <Grid posters={filteredData} thresholdReached={this.thresholdReached} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    data: state.pageData,\r\n    searchText: state.searchText,\r\n    itemsReceived: state.itemsReceived,\r\n    totalItems: state.totalItems,\r\n    dataLoading: state.dataLoading\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    fetchData: page => {\r\n      dispatch(actionTypes.fetchData(page));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Home);\r\n","import React from \"react\";\r\nimport Home from \"./pages/home\";\r\n\r\nimport \"./App.css\";\r\n\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    return (\r\n        <div className=\"App\">\r\n          <Home />\r\n        </div>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n","import * as actionTypes from \"./action/actions\";\r\n\r\nconst initialState = {\r\n  dataLoading: false,\r\n  pageData: null,\r\n  itemsReceived: 0,\r\n  totalItems: 0,\r\n  pagesReceived: 0,\r\n  totalPages: 0\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.LOADING:\r\n      return {\r\n        ...state,\r\n        dataLoading: action.payload\r\n      };\r\n    case actionTypes.UPDATE_DATA:\r\n      let pageData;\r\n      if (state.pageData === null) {\r\n        pageData = action.payload[\"content-items\"].content;\r\n      } else {\r\n        pageData = state.pageData.concat(\r\n          action.payload[\"content-items\"].content\r\n        );\r\n      }\r\n      return {\r\n        ...state,\r\n        itemsReceived: pageData.length,\r\n        pagesReceived: state.pagesReceived + 1,\r\n        totalItems: action.payload[\"total-content-items\"],\r\n        pageData: pageData\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport {Provider} from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./store/reducer\";\r\n\r\nimport \"./index.css\";\r\nconst thunkMiddleware = applyMiddleware(thunk);\r\nconst store = createStore(rootReducer, thunkMiddleware);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}